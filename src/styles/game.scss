@use './variables' as *;
@use './mixins' as *;

// === GAME CONTAINER ===
.game-container { min-height: calc(100vh - 80px); background: $g-main; padding: $s-lg; @include fx-col; align-items: center; }

// === ICONS ===
.header-icon { color: $c-yellow; vertical-align: middle; margin-right: .5rem; }
.difficulty-stars { display: inline-flex; gap: .2rem; &.easy { color: $c-green; } &.medium { color: $c-orange; } &.hard { color: $c-red; } }
.check-icon { color: $c-green; vertical-align: middle; margin-right: .3rem; }
.instruction-icon { color: $c-orange; vertical-align: middle; margin-right: .3rem; }
.hint-icon { color: $c-yellow; vertical-align: middle; margin-left: .3rem; }
.result-icon, .trophy-icon, .summary-icon { vertical-align: middle; margin-right: .3rem; }
.trophy-icon { color: $c-yellow; }
.summary-icon { margin-right: .5rem; }
.control-btn, .buzz-button, .btn-reset, .btn-start-board { svg { vertical-align: middle; margin-right: .5rem; } }

// === GAME HEADER ===
.game-header { 
  @include fx-b; margin-bottom: $s-lg; padding: $s-sm 0; color: $c-white; width: 100%; max-width: 1400px; 
}

.header {
  &-title { @include txt($fs-4, normal, $c-yellow); margin: 0; text-shadow: 2px 2px 4px rgba($c-black, .3); text-align: left; }
  &-team { 
    @include txt(1.3rem, normal, $c-orange); background: rgba($c-orange, .2); padding: .5rem $s-md; 
    border-radius: $r-round; backdrop-filter: blur(10px); border: 2px solid rgba($c-orange, .3); white-space: nowrap; 
  }
}

.game {
  &-code-badge { 
    display: inline-block; background: rgba($c-yellow, .3); padding: .5rem $s-md; border-radius: $r-round; 
    @include txt(1.2rem, bold, $c-yellow); backdrop-filter: blur(10px); margin: .5rem; 
  }
  &-info { display: flex; gap: $s-sm; justify-content: center; flex-wrap: wrap; }
}

.team-badge { 
  display: inline-block; background: rgba($c-green, .3); padding: .5rem $s-md; border-radius: $r-round; 
  font-weight: bold; backdrop-filter: blur(10px); color: $c-white; 
}

// === CATEGORY SELECTION ===
.category {
  &-selection { width: 100%; max-width: 1200px; background: rgba($c-blue, .95); border-radius: $r-4; padding: $s-lg; box-shadow: $s-3; }
  &-card {
    background: linear-gradient(135deg, rgba($c-green, .2), rgba($c-blue, .8));
    border-radius: $r-3; padding: $s-lg; text-align: center; cursor: pointer; transition: all $t-norm;
    border: 3px solid transparent; box-shadow: $s-1; color: $c-white; position: relative;
    
    &:hover:not(.readonly) { transform: translateY(-5px); box-shadow: 0 8px 25px rgba($c-green, .4); border-color: $c-yellow; }
    &.selected { 
      background: $g-bright; border-color: $c-yellow; color: $c-white; transform: scale(1.05); 
      .category-name, .category-difficulty, .category-info { color: $c-white; } 
    }
    &.readonly { cursor: default; opacity: .8; }
    &.votable { 
      cursor: pointer; 
      &:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 8px 30px rgba($c-green, .5); border-color: $c-green; } 
    }
    &.voted { background: $g-bright; border-color: $c-yellow; transform: scale(1.05); animation: voteConfirm .4s ease; }
    &.has-votes { border-color: rgba($c-yellow, .5); }
  }
  &-icon { font-size: 3rem; margin-bottom: $s-sm; }
  &-name { @include txt($fs-4, bold, $c-yellow); margin-bottom: .5rem; }
  &-difficulty { @include txt(1.1rem, normal, rgba($c-white, .8)); margin-bottom: .5rem; }
  &-info { @include txt(.9rem, normal, rgba($c-white, .6)); }
}

@keyframes voteConfirm { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1.05); } }

.vote {
  &-badge, &-teams-badge { 
    @include abs(10px, 10px, null, null); background: $c-yellow; color: $c-blue; padding: .4rem .8rem; 
    border-radius: $r-4; font-size: .85rem; font-weight: bold; @include fx-c; gap: .3rem; box-shadow: 0 2px 10px rgba($c-black, .3); z-index: 10; align-items: center;
  }
}

.instruction { @include txt(1.2rem, normal, $c-white); text-align: center; margin-bottom: $s-lg; }

.categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: $s-lg; margin-bottom: $s-lg; }

.selection-info { 
  background: rgba($c-green, .2); border-left: 4px solid $c-green; padding: $s-md; border-radius: $r-1; text-align: center; color: $c-white; 
  strong { color: $c-yellow; font-size: 1.2rem; } 
}

.waiting {
  &-text { @include txt(1rem, normal, rgba($c-white, .8)); margin-top: $s-sm; }
  &-message { text-align: center; padding: $s-lg; p { @include txt(1.2rem, normal, rgba($c-white, .8)); margin-top: $s-sm; } }
}

.spinner { border: 4px solid rgba($c-white, .2); border-top: 4px solid $c-yellow; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

// === BUZZ ROUND - HOST ===
.buzz-round { width: 100%; max-width: 900px; @include fx-col; gap: $s-lg; }

.host {
  &-question-card { background: rgba($c-blue, .95); border-radius: $r-4; padding: $s-md; box-shadow: $s-3; text-align: center; }
  &-instruction { @include txt($fs-2, italic, rgba($c-white, .8)); }
}

.question-text { @include txt(1.8rem, bold, $c-yellow); margin-bottom: $s-md; }

.buzz {
  &-status { background: rgba($c-blue, .95); border-radius: $r-4; padding: 2.5rem; box-shadow: $s-3; text-align: center; min-height: 200px; @include fx-c; }
  &-controls { display: flex; gap: $s-sm; align-items: center; justify-content: center; margin-top: $s-md; }
  &-round-player { width: 100%; max-width: 600px; @include fx-col; gap: $s-lg; align-items: center; }
  &-instruction { 
    background: rgba($c-blue, .95); border-radius: $r-4; padding: $s-lg; box-shadow: $s-3; text-align: center; width: 100%; 
    h2 { @include txt(2rem, normal, $c-yellow); margin-bottom: $s-sm; } 
    p { @include txt(1.2rem, normal, rgba($c-white, .8)); margin: .5rem 0; } 
  }
  &-hint { 
    font-weight: bold; color: $c-orange !important; font-size: 1.3rem !important; margin-top: $s-sm !important; 
    @include fx-c; gap: .5rem; justify-content: center; 
  }
  &-button {
    padding: $s-lg; width: 300px; height: 300px; border-radius: 50%; border: none; @include txt(2.5rem, bold, $c-white);
    cursor: pointer; transition: all $t-fast; box-shadow: 0 10px 40px rgba($c-black, .3); background: $g-warm; text-transform: uppercase; @include fx-c; gap: .5rem;
    
    &:hover:not(:disabled) { transform: scale(1.05); box-shadow: 0 15px 50px rgba(#ff4757, .6); }
    &:active:not(:disabled) { transform: scale(.95); }
    &.buzz-first { background: linear-gradient(135deg, $c-green, $c-yellow); animation: celebrate .5s ease-in-out; box-shadow: 0 0 60px rgba($c-green, .8); }
    &.buzz-second { background: linear-gradient(135deg, $c-yellow, $c-orange); color: $c-blue; cursor: not-allowed; }
    &.buzz-disabled { background: linear-gradient(135deg, #95a5a6, #7f8c8d); cursor: not-allowed; opacity: .6; }
    
    svg { font-size: 1.8rem; }
  }
  &-result { background: rgba($c-blue, .95); border-radius: $r-3; padding: $s-md $s-lg; box-shadow: 0 10px 30px rgba($c-black, .2); text-align: center; p { @include txt(1.3rem, bold, $c-yellow); margin: 0; } }
}

@keyframes celebrate { 0%, 100% { transform: scale(1); } 25% { transform: scale(1.2) rotate(-10deg); } 75% { transform: scale(1.2) rotate(10deg); } }

.buzzed {
  &-info { width: 100%; &-content { @include fx-b; width: 100%; gap: $s-lg; } }
  &-label { @include fx-c; gap: $s-sm; @include txt($fs-4, normal, rgba($c-white, .8)); align-items: center; }
  &-icon { font-size: 3rem; color: $c-yellow; }
}

@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

.team-name-display { 
  @include txt(2.5rem, bold, $c-yellow); background: rgba($c-green, .2); padding: $s-md $s-lg; 
  border-radius: $r-3; border: 3px solid $c-green; white-space: nowrap; 
}

.waiting-buzz {
  width: 100%;
  &.processing { color: $c-yellow; .pulse-animation { color: $c-yellow; animation: processingPulse .8s ease-in-out infinite; } }
  p { @include txt(1.3rem, normal, rgba($c-white, .7)); margin-top: $s-sm; }
}

@keyframes processingPulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.15); opacity: .7; } }

.pulse-animation { font-size: 4rem; color: $c-orange; }

.btn {
  &-reset { 
    background: $c-red; color: $c-white; border: none; padding: $s-sm $s-lg; border-radius: $r-round; 
    @include txt(1.2rem, bold, $c-white); cursor: pointer; transition: all $t-norm; box-shadow: 0 4px 15px rgba(#ff6b6b, .4); align-self: center; 
    &:hover { background: #ee5a52; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(#ff6b6b, .6); } 
    &:active { transform: translateY(0); } 
    svg { vertical-align: middle; margin-right: .5rem; }
  }
  &-start-board {
    background: $g-bright; color: $c-white; border: none; padding: $s-sm $s-lg; border-radius: $r-round;
    @include txt(1.2rem, bold, $c-white); cursor: pointer; transition: all $t-norm; box-shadow: 0 4px 15px rgba($c-green, .4);
    
    &:hover { background: linear-gradient(135deg, #45a049, #3d8b40); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(#4caf50, .6); }
    &:active { transform: translateY(0); }
    &:disabled { background: linear-gradient(135deg, rgba($c-green, .3), rgba($c-orange, .3)); color: rgba($c-white, .4); cursor: not-allowed; box-shadow: $s-1; transform: none; &:hover { background: linear-gradient(135deg, rgba($c-green, .3), rgba($c-orange, .3)); transform: none; box-shadow: $s-1; } }
    
    svg { vertical-align: middle; margin-right: .5rem; }
  }
}

// === RESPONSIVE ===
@include mq('md') {
  .game-container { padding: $s-sm; }
  .game-header { flex-direction: row; justify-content: space-between; align-items: center; gap: .5rem; margin-bottom: $s-sm; }
  .header { &-title { font-size: $fs-2; } &-team { font-size: .8rem; padding: .4rem $s-sm; } }
  
  .categories-grid { grid-template-columns: repeat(2, 1fr); gap: .8rem; }
  .category { &-card { padding: $s-sm; } &-icon { font-size: 2rem; margin-bottom: .5rem; } &-name { font-size: $fs-2; } &-difficulty { font-size: .85rem; } }
  
  .buzz {
    &-controls { flex-direction: column; width: 100%; margin-bottom: 4rem; }
    &-status { padding: 1.2rem; min-height: 120px; border-radius: $r-3; }
    &-round-player { gap: 1.2rem; }
    &-instruction { padding: .8rem; border-radius: $r-2; h2 { font-size: $fs-2; margin-bottom: .3rem; } p { font-size: .75rem; margin: .2rem 0; } }
    &-hint { font-size: .85rem !important; margin-top: .3rem !important; }
    &-button { width: 220px; height: 220px; font-size: 1.4rem; padding: $s-sm; svg { font-size: 1.8rem; } }
  }
  
  .btn { &-reset, &-start-board { width: 100%; font-size: $fs-2; padding: .8rem $s-md; } }
  
  .buzzed { &-info-content { flex-direction: column; align-items: center; gap: .8rem; text-align: center; } &-label { font-size: .85rem; flex-direction: column; text-align: center; gap: .5rem; } &-icon { font-size: 2rem; } }
  
  .team-name-display { font-size: 1.1rem; padding: .8rem 1.2rem; }
  .pulse-animation { font-size: 2.5rem; }
  .waiting-buzz p { font-size: .9rem; margin-top: .6rem; }
  
  .host { &-question-card { padding: $s-sm; border-radius: $r-3; } &-instruction { font-size: .75rem; } }
  .question-text { font-size: 1.1rem; margin-bottom: .8rem; }
  .instruction-icon, .hint-icon { font-size: .5rem; }
  
  .vote-badge, .vote-teams-badge { font-size: .75rem; padding: .3rem .6rem; }
}
