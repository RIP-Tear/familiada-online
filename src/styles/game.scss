@use './variables' as *;
@use './mixins' as *;
@use 'sass:color';

// === GAME CONTAINER ===
.game-container { 
  min-height: calc(100vh - 80px); 
  background: $g-main; 
  padding: $s-lg; 
  @include fx-col; 
  align-items: center;
  
  @media (min-width: 768px) {
    &:has(.game-sidebar) {
      display: grid;
      grid-template-columns: 350px 1fr;
      gap: $s-lg;
      align-items: start;
    }
  }
}

.game-sidebar {
  width: 100%;
  background: rgba($c-blue, .15);
  border-radius: $r-4;
  padding: $s-lg;
  border: 2px solid rgba($c-blue, .3);
  
  .sidebar-header {
    margin-bottom: $s-lg;
    
    .sidebar-title {
      @include txt($fs-4, bold, $c-yellow);
      margin: 0 0 $s-sm 0;
    }
    
    .sidebar-subtitle {
      @include txt($fs-2, normal, rgba($c-white, .7));
      margin: 0;
    }
  }
}

.game-main {
  width: 100%;
}

.host-badge {
  display: inline-block;
  background: $g-bright;
  color: $c-white;
  padding: $s-sm $s-lg;
  border-radius: $r-4;
  font-family: $f;
  font-size: $fs-2;
  font-weight: bold;
  margin-bottom: $s-lg;
  box-shadow: 0 4px 15px rgba($c-green, .3);
}

// === ICONS ===
.header-icon { color: $c-yellow; vertical-align: middle; margin-right: .5rem; }
.difficulty-stars { display: inline-flex; gap: .2rem; &.easy { color: $c-green; } &.medium { color: $c-orange; } &.hard { color: $c-red; } }
.check-icon { color: $c-green; vertical-align: middle; margin-right: .3rem; }
.instruction-icon { color: $c-orange; vertical-align: middle; margin-right: .3rem; }
.hint-icon { color: $c-yellow; vertical-align: middle; margin-left: .3rem; }
.result-icon, .trophy-icon, .summary-icon { vertical-align: middle; margin-right: .3rem; }
.trophy-icon { color: $c-yellow; }
.summary-icon { margin-right: .5rem; }
.control-btn, .buzz-button, .btn-reset, .btn-start-board { svg { vertical-align: middle; margin-right: .5rem; } }

// === GAME HEADER ===
.game-header { 
  @include fx-b; margin-bottom: $s-lg; padding: $s-sm 0; color: $c-white; width: 100%; max-width: 1400px; 
}

.header {
  &-title { @include txt($fs-4, normal, $c-yellow); margin: 0; text-shadow: 2px 2px 4px rgba($c-black, .3); text-align: left; }
  &-team { 
    @include txt(1.3rem, normal, $c-orange); background: rgba($c-orange, .2); padding: .5rem $s-md; 
    border-radius: $r-round; backdrop-filter: blur(10px); border: 2px solid rgba($c-orange, .3); white-space: nowrap; 
  }
}

.game {
  &-code-badge { 
    display: inline-block; background: rgba($c-yellow, .3); padding: .5rem $s-md; border-radius: $r-round; 
    @include txt(1.2rem, bold, $c-yellow); backdrop-filter: blur(10px); margin: .5rem; 
  }
  &-info { display: flex; gap: $s-sm; justify-content: center; flex-wrap: wrap; }
}

.team-badge { 
  display: inline-block; background: rgba($c-green, .3); padding: .5rem $s-md; border-radius: $r-round; 
  font-weight: bold; backdrop-filter: blur(10px); color: $c-white; 
}

// === CATEGORY SELECTION ===
.category {
  &-selection { width: 100%; max-width: 1200px; background: rgba($c-blue, .95); border-radius: $r-4; padding: $s-lg; box-shadow: $s-3; }
  &-card {
    background: linear-gradient(135deg, rgba($c-green, .2), rgba($c-blue, .8));
    border-radius: $r-3; padding: $s-lg; text-align: center; cursor: pointer; transition: all $t-norm;
    border: 3px solid transparent; box-shadow: $s-1; color: $c-white; position: relative;
    
    &:hover:not(.readonly) { transform: translateY(-5px); box-shadow: 0 8px 25px rgba($c-green, .4); border-color: $c-yellow; }
    &.selected { 
      background: $g-bright; border-color: $c-yellow; color: $c-white; transform: scale(1.05); 
      .category-name, .category-difficulty, .category-info { color: $c-white; } 
    }
    &.readonly { cursor: default; opacity: .8; }
    &.votable { 
      cursor: pointer; 
      &:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 8px 30px rgba($c-green, .5); border-color: $c-green; } 
    }
    &.voted { background: $g-bright; border-color: $c-yellow; transform: scale(1.05); animation: voteConfirm .4s ease; }
    &.has-votes { border-color: rgba($c-yellow, .5); }
    &.used { 
      opacity: 0.7; 
      border-color: rgba($c-orange, .5); 
      background: linear-gradient(135deg, rgba($c-orange, .2), rgba($c-blue, .6)); 
    }
    &.custom {
      background: linear-gradient(135deg, rgba($c-yellow, .3), rgba($c-orange, .2));
      border: 3px solid $c-yellow;
      box-shadow: 0 0 20px rgba($c-yellow, .4);
      
      &:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 8px 30px rgba($c-yellow, .6);
      }
    }
  }
  &-icon { font-size: 3rem; margin-bottom: $s-sm; }
  &-name { @include txt($fs-4, bold, $c-yellow); margin-bottom: .5rem; }
  &-difficulty { @include txt(1.1rem, normal, rgba($c-white, .8)); margin-bottom: .5rem; }
  &-info { @include txt(.9rem, normal, rgba($c-white, .6)); }
}

@keyframes voteConfirm { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1.05); } }

.vote {
  &-badge { 
    @include abs(10px, 10px, null, null); background: $c-yellow; color: $c-blue; padding: .4rem .8rem; 
    border-radius: $r-4; font-size: .85rem; font-weight: bold; @include fx-c; gap: .3rem; box-shadow: 0 2px 10px rgba($c-black, .3); z-index: 10; align-items: center;
  }
  &-teams-badge { 
    @include abs(null, 10px, 10px, null); background: $c-yellow; color: $c-blue; padding: .4rem .8rem; 
    border-radius: $r-4; font-size: .85rem; font-weight: bold; @include fx-c; gap: .3rem; box-shadow: 0 2px 10px rgba($c-black, .3); z-index: 10; align-items: center;
  }
  &-teams-badge.opponent {
    background: rgba($c-orange, .9);
    color: $c-white;
  }
}

.used-badge {
  @include abs(10px, null, null, 10px); 
  background: rgba($c-orange, .9); 
  color: $c-white; 
  padding: .4rem .8rem; 
  border-radius: $r-4; 
  font-size: .85rem; 
  font-weight: bold; 
  @include fx-c; 
  gap: .3rem; 
  box-shadow: 0 2px 10px rgba($c-black, .3); 
  z-index: 10; 
  align-items: center;
}

.custom-badge {
  @include abs(10px, null, 10px, null);
  background: linear-gradient(135deg, $c-yellow, $c-orange);
  color: $c-blue;
  padding: .5rem 1rem;
  border-radius: $r-4;
  font-size: .9rem;
  font-weight: bold;
  @include fx-c;
  gap: .4rem;
  box-shadow: 0 3px 15px rgba($c-yellow, .5);
  z-index: 10;
  align-items: center;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.category-separator {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  gap: $s-md;
  margin: $s-md 0;
  
  .separator-line {
    flex: 1;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba($c-yellow, .5), transparent);
  }
  
  .separator-text {
    @include txt(1rem, bold, rgba($c-yellow, .8));
    text-transform: uppercase;
    letter-spacing: 1px;
    white-space: nowrap;
    padding: 0 $s-sm;
  }
}

.instruction { @include txt(1.2rem, normal, $c-white); text-align: center; margin-bottom: $s-lg; }

.categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: $s-lg; margin-bottom: $s-lg; }

.selection-info { 
  background: rgba($c-green, .2); border-left: 4px solid $c-green; padding: $s-md; border-radius: $r-1; text-align: center; color: $c-white; 
  strong { color: $c-yellow; font-size: 1.2rem; } 
}

.waiting {
  &-text { @include txt(1rem, normal, rgba($c-white, .8)); margin-top: $s-sm; }
  &-message { text-align: center; padding: $s-lg; p { @include txt(1.2rem, normal, rgba($c-white, .8)); margin-top: $s-sm; } }
  &-votes {
    text-align: center;
    padding: $s-xl;
    color: rgba($c-white, .7);
    
    .waiting-icon {
      font-size: 4rem;
      color: $c-yellow;
      margin-bottom: $s-md;
      animation: pulse 2s ease-in-out infinite;
    }
    
    p {
      font-size: 1.2rem;
      margin: 0;
    }
  }
}

.btn-random-category {
  background: linear-gradient(135deg, $c-orange, #e65c00);
  color: $c-white;
  border: none;
  padding: $s-sm $s-md;
  border-radius: $r-round;
  font-family: $f;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all $t-norm;
  box-shadow: 0 4px 15px rgba($c-orange, .4);
  @include fx-c;
  gap: $s-sm;
  width: 100%;
  max-width: 600px;
  margin: $s-lg auto 0;
  
  .btn-icon {
    font-size: 1.1rem;
  }
  
  &.btn-start-game {
    background: linear-gradient(135deg, $c-green, #00a86b);
    box-shadow: 0 4px 15px rgba($c-green, .4);
    
    &:hover:not(:disabled) {
      background: linear-gradient(135deg, #00d68f, $c-green);
      box-shadow: 0 6px 20px rgba($c-green, .6);
    }
  }
  
  &:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba($c-orange, .6);
    background: linear-gradient(135deg, #ff6f00, $c-orange);
  }
  
  &:active:not(:disabled) {
    transform: translateY(0);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
  }
}

.categories-grid.host-categories {
  display: flex;
  flex-direction: column;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  gap: $s-md;
}

.team-category-box {
  background: rgba($c-black, .3);
  border: 3px dashed rgba($c-yellow, .3);
  border-radius: $r-3;
  padding: $s-sm;
  text-align: center;
  height: 200px;
  @include fx-col;
  justify-content: space-between;
  align-items: center;
  gap: $s-xs;
  transition: all $t-norm;
  position: relative;
  
  &.filled {
    background: linear-gradient(135deg, rgba($c-green, .2), rgba($c-blue, .8));
    border: 3px solid $c-yellow;
    cursor: default;
  }
  
  &.used {
    opacity: 0.7;
    border-color: rgba($c-orange, .5);
    background: linear-gradient(135deg, rgba($c-orange, .2), rgba($c-blue, .6));
  }
  
  .team-label {
    background: rgba($c-yellow, .2);
    color: $c-yellow;
    font-size: .9rem;
    font-weight: bold;
    padding: .4rem $s-sm;
    border-radius: $r-round;
    border: 2px solid $c-yellow;
    text-transform: uppercase;
    letter-spacing: 1px;
    width: 100%;
    margin-top: auto;
  }
  
  .waiting-content {
    @include fx-col;
    align-items: center;
    justify-content: center;
    gap: $s-sm;
    flex: 1;
  }
  
  .waiting-category-icon {
    font-size: 3rem;
    color: rgba($c-yellow, .3);
    animation: waitingPulse 2s ease-in-out infinite;
  }
  
  .waiting-category-text {
    font-size: 1rem;
    color: rgba($c-white, .5);
    font-style: italic;
  }
}

.spinner { border: 4px solid rgba($c-white, .2); border-top: 4px solid $c-yellow; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto; }
.loading-spinner { border: 3px solid rgba($c-white, .2); border-top: 3px solid $c-yellow; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; flex-shrink: 0; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

// === BUZZ ROUND - HOST ===
.buzz-round { width: 100%; max-width: 900px; @include fx-col; gap: $s-lg; }

.host {
  &-question-card { 
    background: rgba($c-blue, .95); border-radius: $r-4; padding: $s-md; box-shadow: $s-3; text-align: center; 
    min-height: 180px; @include fx-c; justify-content: center;
  }
  &-instruction { @include txt($fs-2, italic, rgba($c-white, .8)); }
}

.hidden-question {
  @include fx-col; align-items: center; justify-content: center; gap: $s-sm; width: 100%; height: 100%;
  
  &-icon { font-size: 3.5rem; color: rgba($c-yellow, .5); animation: questionPulse 2s ease-in-out infinite; }
  &-text { @include txt(1.1rem, normal, rgba($c-white, .6)); margin: 0; max-width: 90%; }
}

@keyframes questionPulse { 0%, 100% { opacity: .5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } }

.revealed-question {
  @include fx-col; justify-content: center; width: 100%; height: 100%;
  animation: fadeInQuestion 0.6s ease-out;
}

@keyframes fadeInQuestion {
  0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: translateY(0); }
}

.question-text { @include txt(1.8rem, bold, $c-yellow); margin-bottom: $s-md; }

.buzz {
  &-status { background: rgba($c-blue, .95); border-radius: $r-4; padding: 2.5rem; box-shadow: $s-3; text-align: center; min-height: 200px; @include fx-c; }
  &-controls { display: flex; gap: $s-sm; align-items: center; justify-content: center; margin-top: $s-md; }
  &-round-player { width: 100%; max-width: 600px; @include fx-col; gap: $s-lg; align-items: center; }
  &-instruction { 
    background: rgba($c-blue, .95); border-radius: $r-4; padding: $s-lg; box-shadow: $s-3; text-align: center; width: 100%; 
    h2 { @include txt(2rem, normal, $c-yellow); margin-bottom: $s-sm; } 
    p { @include txt(1.2rem, normal, rgba($c-white, .8)); margin: .5rem 0; } 
  }
  &-hint { 
    font-weight: bold; color: $c-orange !important; font-size: 1.3rem !important; margin-top: $s-sm !important; 
    @include fx-c; gap: .5rem; justify-content: center; 
  }
  &-button {
    padding: $s-lg; width: 300px; height: 300px; border-radius: 50%; border: none; @include txt(2.5rem, bold, $c-white);
    cursor: pointer; transition: all $t-fast; box-shadow: 0 10px 40px rgba($c-black, .3); background: $g-warm; text-transform: uppercase; @include fx-c; gap: .5rem;
    
    &:hover:not(:disabled) { transform: scale(1.05); box-shadow: 0 15px 50px rgba(#ff4757, .6); }
    &:active:not(:disabled) { transform: scale(.95); }
    &.buzz-first { background: linear-gradient(135deg, $c-green, $c-yellow); animation: celebrate .5s ease-in-out; box-shadow: 0 0 60px rgba($c-green, .8); }
    &.buzz-second { background: linear-gradient(135deg, $c-yellow, $c-orange); color: $c-blue; cursor: not-allowed; }
    &.buzz-disabled { background: linear-gradient(135deg, #95a5a6, #7f8c8d); cursor: not-allowed; opacity: .6; }
    &.question-locked { 
      background: linear-gradient(135deg, rgba(#95a5a6, .4), rgba(#7f8c8d, .4)); 
      cursor: not-allowed; 
      opacity: .4; 
      backdrop-filter: blur(2px);
      box-shadow: 0 5px 20px rgba($c-black, .2);
    }
    
    svg { font-size: 1.8rem; }
  }
  &-result { background: rgba($c-blue, .95); border-radius: $r-3; padding: $s-md $s-lg; box-shadow: 0 10px 30px rgba($c-black, .2); text-align: center; p { @include txt(1.3rem, bold, $c-yellow); margin: 0; } }
}

@keyframes celebrate { 0%, 100% { transform: scale(1); } 25% { transform: scale(1.2) rotate(-10deg); } 75% { transform: scale(1.2) rotate(10deg); } }

.buzzed {
  &-info { width: 100%; &-content { @include fx-b; width: 100%; gap: $s-lg; } }
  &-label { @include fx-c; gap: $s-sm; @include txt($fs-4, normal, rgba($c-white, .8)); align-items: center; }
  &-icon { font-size: 3rem; color: $c-yellow; }
}

@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

.buzzed-info {
  width: 100%;
  
  &-content {
    @include fx-col;
    gap: $s-md;
    width: 100%;
  }
}

.buzzed-label {
  @include fx-c;
  gap: $s-sm;
  color: $c-white;
  font-size: 1.2rem;
}

.buzzed-icon {
  font-size: 2rem;
  
  &.pulse-animation {
    animation: pulse 1s ease-in-out infinite;
  }
}

.team-name-display { 
  @include txt(2.5rem, bold, $c-yellow); background: rgba($c-green, .2); padding: $s-md $s-lg; 
  border-radius: $r-3; border: 3px solid $c-green; white-space: nowrap;
  width: 100%;
  text-align: center;
  min-height: 4rem;
  @include fx-c;
  
  &.empty {
    opacity: 0;
    visibility: hidden;
  }
}

.waiting-buzz {
  width: 100%;
  &.processing { color: $c-yellow; .pulse-animation { color: $c-yellow; animation: processingPulse .8s ease-in-out infinite; } }
  p { @include txt(1.3rem, normal, rgba($c-white, .7)); margin-top: $s-sm; }
}

@keyframes processingPulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.15); opacity: .7; } }

.pulse-animation { font-size: 4rem; color: $c-orange; }

.btn {
  &-reveal-question {
    background: linear-gradient(135deg, $c-yellow, $c-orange); color: $c-blue; border: none; padding: $s-sm $s-lg; border-radius: $r-round;
    @include txt(1.2rem, bold, $c-blue); cursor: pointer; transition: all $t-norm; box-shadow: 0 4px 15px rgba($c-yellow, .4); align-self: center;
    &:hover:not(:disabled) { background: linear-gradient(135deg, #ffd93d, $c-orange); transform: translateY(-2px); box-shadow: 0 6px 20px rgba($c-yellow, .6); }
    &:active:not(:disabled) { transform: translateY(0); }
    &:disabled { 
      background: linear-gradient(135deg, rgba($c-yellow, .3), rgba($c-orange, .3)); 
      color: rgba($c-blue, .4); cursor: not-allowed; opacity: .6; box-shadow: none;
    }
    svg { vertical-align: middle; margin-right: .5rem; }
  }
  &-reset { 
    background: $c-red; color: $c-white; border: none; padding: $s-sm $s-lg; border-radius: $r-round; 
    @include txt(1.2rem, bold, $c-white); cursor: pointer; transition: all $t-norm; box-shadow: 0 4px 15px rgba(#ff6b6b, .4); align-self: center; 
    &:hover { background: #ee5a52; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(#ff6b6b, .6); } 
    &:active { transform: translateY(0); } 
    svg { vertical-align: middle; margin-right: .5rem; }
  }
  &-start-board {
    background: $g-bright; color: $c-white; border: none; padding: $s-sm $s-lg; border-radius: $r-round;
    @include txt(1.2rem, bold, $c-white); cursor: pointer; transition: all $t-norm; box-shadow: 0 4px 15px rgba($c-green, .4);
    
    &:hover { background: linear-gradient(135deg, #45a049, #3d8b40); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(#4caf50, .6); }
    &:active { transform: translateY(0); }
    &:disabled { background: linear-gradient(135deg, rgba($c-green, .3), rgba($c-orange, .3)); color: rgba($c-white, .4); cursor: not-allowed; box-shadow: $s-1; transform: none; &:hover { background: linear-gradient(135deg, rgba($c-green, .3), rgba($c-orange, .3)); transform: none; box-shadow: $s-1; } }
    
    svg { vertical-align: middle; margin-right: .5rem; }
  }
}

// === RESPONSIVE ===
@include mq('md') {
  .game-container { padding: $s-sm; }
  .game-header { flex-direction: row; justify-content: space-between; align-items: center; gap: .5rem; margin-bottom: $s-sm; }
  .header { &-title { font-size: $fs-2; } &-team { font-size: .8rem; padding: .4rem $s-sm; } }
  
  .categories-grid { grid-template-columns: repeat(2, 1fr); gap: .8rem; }
  .category { &-card { padding: $s-sm; } &-icon { font-size: 2rem; margin-bottom: .5rem; } &-name { font-size: $fs-2; } &-difficulty { font-size: .85rem; } }
  
  .buzz {
    &-controls { flex-direction: column; width: 100%; margin-bottom: 4rem; }
    &-status { padding: 1.2rem; min-height: 120px; border-radius: $r-3; }
    &-round-player { gap: 1.2rem; }
    &-instruction { padding: .8rem; border-radius: $r-2; h2 { font-size: $fs-2; margin-bottom: .3rem; } p { font-size: .75rem; margin: .2rem 0; } }
    &-hint { font-size: .85rem !important; margin-top: .3rem !important; }
    &-button { width: 220px; height: 220px; font-size: 1.4rem; padding: $s-sm; svg { font-size: 1.8rem; } }
  }
  
  .btn { &-reveal-question, &-reset, &-start-board { width: 100%; font-size: $fs-2; padding: .8rem $s-md; } }
  
  .buzzed { &-info-content { flex-direction: column; align-items: center; gap: .8rem; text-align: center; } &-label { font-size: .85rem; flex-direction: column; text-align: center; gap: .5rem; } &-icon { font-size: 2rem; } }
  
  .team-name-display { font-size: 1.1rem; padding: .8rem 1.2rem; }
  .pulse-animation { font-size: 2.5rem; }
  .waiting-buzz p { font-size: .9rem; margin-top: .6rem; }
  
  .host { &-question-card { padding: $s-sm; border-radius: $r-3; min-height: 140px; } &-instruction { font-size: .75rem; } }
  .question-text { font-size: 1.1rem; margin-bottom: .8rem; }
  .instruction-icon, .hint-icon { font-size: .5rem; }
  .hidden-question { gap: .5rem; &-icon { font-size: 2.2rem; } &-text { font-size: .85rem; } }
  
  .vote-badge, .vote-teams-badge { font-size: .75rem; padding: .3rem .6rem; }
}

// === CUSTOM CATEGORY CREATOR ===
.custom-category-creator {
  width: 100%;
  max-width: 900px;
  background: rgba($c-blue, .95);
  border-radius: $r-4;
  padding: $s-xl;
  box-shadow: $s-3;
  
  .creator-title {
    @include txt($fs-4, bold, $c-yellow);
    text-align: center;
    margin-bottom: $s-xl;
  }
  
  .creator-form {
    @include fx-col;
    gap: $s-lg;
  }
  
  .form-group {
    @include fx-col;
    gap: $s-sm;
    
    label {
      @include txt(1.1rem, bold, $c-white);
    }
  }
  
  .form-input {
    padding: $s-sm $s-md;
    border-radius: $r-2;
    border: 2px solid rgba($c-yellow, .3);
    background: rgba($c-black, .3);
    color: $c-white;
    font-size: 1rem;
    transition: all $t-fast;
    
    &:focus {
      outline: none;
      border-color: $c-yellow;
      background: rgba($c-black, .5);
    }
    
    &::placeholder {
      color: rgba($c-white, .4);
    }
  }
  
  .difficulty-buttons {
    display: flex;
    gap: $s-md;
  }
  
  .btn-difficulty {
    flex: 1;
    padding: $s-md;
    border-radius: $r-3;
    border: 2px solid rgba($c-yellow, .3);
    background: rgba($c-black, .3);
    color: $c-white;
    font-weight: bold;
    cursor: pointer;
    transition: all $t-fast;
    
    &:hover {
      border-color: $c-yellow;
      transform: translateY(-2px);
    }
    
    &.active {
      background: $c-yellow;
      color: $c-blue;
      border-color: $c-yellow;
    }
  }
  
  .questions-list {
    @include fx-col;
    gap: $s-xl;
    max-height: 60vh;
    overflow-y: auto;
    padding-right: $s-sm;
    
    &::-webkit-scrollbar {
      width: 8px;
    }
    
    &::-webkit-scrollbar-track {
      background: rgba($c-black, .2);
      border-radius: $r-round;
    }
    
    &::-webkit-scrollbar-thumb {
      background: rgba($c-yellow, .5);
      border-radius: $r-round;
      
      &:hover {
        background: rgba($c-yellow, .7);
      }
    }
  }
  
  .question-block {
    background: rgba($c-black, .2);
    padding: $s-lg;
    border-radius: $r-3;
    border: 2px solid rgba($c-yellow, .2);
  }
  
  .question-number {
    @include txt(1.2rem, bold, $c-yellow);
    margin-bottom: $s-md;
  }
  
  .question-input {
    margin-bottom: $s-lg;
  }
  
  .answers-list {
    @include fx-col;
    gap: $s-sm;
  }
  
  .answers-label {
    @include txt(.9rem, normal, rgba($c-white, .8));
    margin-bottom: $s-sm;
  }
  
  .answer-item {
    display: flex;
    align-items: center;
    gap: $s-sm;
  }
  
  .answer-number {
    @include txt(1rem, bold, $c-yellow);
    min-width: 25px;
  }
  
  .answer-input {
    flex: 1;
  }
  
  .answer-controls {
    display: flex;
    gap: .3rem;
  }
  
  .btn-answer-control {
    width: 32px;
    height: 32px;
    border-radius: $r-2;
    border: 1px solid rgba($c-yellow, .3);
    background: rgba($c-black, .3);
    color: $c-white;
    cursor: pointer;
    transition: all $t-fast;
    font-size: 1rem;
    
    &:hover:not(:disabled) {
      background: rgba($c-yellow, .2);
      border-color: $c-yellow;
    }
    
    &:disabled {
      opacity: .3;
      cursor: not-allowed;
    }
    
    &.btn-remove {
      color: $c-red;
      
      &:hover {
        background: rgba($c-red, .2);
        border-color: $c-red;
      }
    }
  }
  
  .btn-add-answer {
    padding: $s-sm;
    border-radius: $r-2;
    border: 2px dashed rgba($c-green, .5);
    background: rgba($c-green, .1);
    color: $c-green;
    cursor: pointer;
    transition: all $t-fast;
    font-weight: bold;
    
    &:hover {
      background: rgba($c-green, .2);
      border-color: $c-green;
    }
  }
  
  .creator-actions {
    display: flex;
    gap: $s-md;
    justify-content: center;
    margin-top: $s-lg;
    
    button {
      padding: $s-md $s-xl;
      border-radius: $r-3;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all $t-fast;
      @include fx-c;
      gap: $s-sm;
      
      &.btn-cancel {
        background: rgba($c-red, .2);
        border: 2px solid rgba($c-red, .5);
        color: $c-white;
        
        &:hover {
          background: rgba($c-red, .3);
          border-color: $c-red;
        }
      }
      
      &.btn-save {
        background: $g-bright;
        border: 2px solid $c-green;
        color: $c-white;
        
        &:hover {
          transform: translateY(-3px);
          box-shadow: 0 8px 20px rgba($c-green, .4);
        }
      }
    }
  }
}

// Nowy interfejs tworzenia kategorii z krokami
.custom-category-creator-steps {
  width: 100%;
  max-width: 900px;
  @include fx-col;
  gap: $s-lg;

  .creator-step-title {
    @include txt($fs-4, bold, $c-yellow);
    text-align: center;
    margin-bottom: $s-md;
  }

  .creator-name-input {
    width: 100%;

    .form-input-large {
      width: 100%;
      padding: $s-md $s-lg;
      border-radius: $r-3;
      border: 3px solid rgba($c-yellow, .3);
      background: rgba($c-blue, .8);
      color: $c-yellow;
      font-family: $f;
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      transition: all $t-fast;

      &:focus {
        outline: none;
        border-color: $c-yellow;
        box-shadow: 0 0 20px rgba($c-yellow, .3);
      }

      &::placeholder {
        color: rgba($c-white, .4);
      }
    }
  }

  .difficulty-cards {
    display: flex;
    gap: $s-md;
    justify-content: center;
  }

  .difficulty-card {
    flex: 1;
    max-width: 200px;
    background: rgba($c-blue, .8);
    border: 3px solid rgba($c-yellow, .3);
    border-radius: $r-3;
    padding: $s-lg;
    cursor: pointer;
    transition: all $t-fast;
    @include fx-col;
    align-items: center;
    gap: $s-sm;

    &:hover {
      border-color: $c-yellow;
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba($c-yellow, .3);
    }

    &.selected {
      background: rgba($c-yellow, .2);
      border-color: $c-yellow;
      box-shadow: 0 0 30px rgba($c-yellow, .4);
    }

    .difficulty-stars {
      display: flex;
      gap: .2rem;
      font-size: 1.8rem;
      
      &.easy {
        color: $c-green;
      }
      
      &.medium {
        color: $c-orange;
      }
      
      &.hard {
        color: $c-red;
      }
    }

    .difficulty-label {
      @include txt(1.1rem, bold, $c-white);
    }
  }

  .actions-container {
    display: flex;
    flex-direction: column;
    gap: $s-md;
    margin-top: $s-lg;
    width: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    background: rgba($c-blue, .6);
    padding: $s-lg;
    border-radius: $r-3;
    border: 2px solid rgba($c-yellow, .2);

    .btn-step-cancel,
    .btn-nav-cancel {
      width: 100%;
      padding: $s-sm $s-md;
      border-radius: $r-round;
      background: linear-gradient(135deg, #d65d5d, #c74444);
      border: none;
      color: $c-white;
      font-family: $f;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all $t-fast;
      box-shadow: 0 3px 10px rgba($c-red, .3);

      &:hover {
        background: linear-gradient(135deg, #e06e6e, #d65d5d);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba($c-red, .5);
      }
    }

    .btn-step-next {
      width: 100%;
      padding: $s-sm $s-md;
      border-radius: $r-round;
      background: $g-bright;
      border: none;
      color: $c-white;
      font-family: $f;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all $t-fast;
      @include fx-c;
      gap: $s-sm;
      box-shadow: 0 4px 15px rgba($c-green, .4);

      &:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba($c-green, .6);
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        box-shadow: none;
      }
    }
  }

  .question-creator-board {
    width: 100%;
    @include fx-col;
    gap: $s-lg;

    .question-input-large {
      width: 100%;
      padding: $s-lg;
      border-radius: $r-3;
      border: 3px solid rgba($c-yellow, .3);
      background: rgba($c-blue, .8);
      color: $c-yellow;
      font-family: $f;
      font-size: 1.3rem;
      font-weight: bold;
      text-align: center;
      transition: all $t-fast;

      &:focus {
        outline: none;
        border-color: $c-yellow;
        box-shadow: 0 0 20px rgba($c-yellow, .3);
      }

      &::placeholder {
        color: rgba($c-white, .4);
      }
    }
  }

  .answers-board {
    @include fx-col;
    gap: $s-sm;
  }

  .answer-row {
    display: flex;
    align-items: center;
    gap: $s-sm;
    transition: opacity $t-fast;

    .answer-num {
      @include txt(1.2rem, bold, $c-yellow);
      min-width: 30px;
      text-align: center;
    }

    .answer-input-wrapper {
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      gap: $s-xs;
    }

    .answer-input-board {
      flex: 1;
      padding: $s-sm $s-md;
      padding-right: 80px; // Space for buttons
      border-radius: $r-3;
      border: 3px solid rgba($c-yellow, .3);
      background: rgba($c-blue, .8);
      color: $c-white;
      font-family: $f;
      font-size: 1rem;
      transition: all $t-fast;

      &:focus {
        outline: none;
        border-color: $c-yellow;
        box-shadow: 0 0 15px rgba($c-yellow, .3);
      }

      &::placeholder {
        color: rgba($c-white, .4);
      }
    }

    .btn-control-board {
      position: absolute;
      right: 40px; // Position inside input
      width: 28px;
      height: 28px;
      border-radius: $r-2;
      border: none;
      background: transparent;
      color: $c-white;
      font-family: $f;
      cursor: pointer;
      transition: all $t-fast;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;

      &:hover:not(:disabled) {
        background: rgba($c-red, .2);
        transform: scale(1.1);
      }

      &:disabled {
        opacity: .3;
        cursor: not-allowed;
      }

      &.btn-remove-board {
        color: $c-red;

        &.disabled {
          opacity: .3;
          color: rgba($c-red, .4);
        }

        &:hover:not(:disabled) {
          background: rgba($c-red, .2);
        }
      }
    }

    .drag-handle {
      position: absolute;
      right: 8px; // Position inside input
      display: flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      color: rgba($c-yellow, .6);
      cursor: grab;
      transition: all $t-fast;
      font-size: 1.4rem;

      &:hover {
        color: $c-yellow;
        transform: scale(1.1);
      }

      &:active {
        cursor: grabbing;
      }
    }
  }

  .btn-add-answer-board {
    padding: $s-sm $s-md;
    border-radius: $r-round;
    border: none;
    background: linear-gradient(135deg, $c-green, #23a094);
    color: $c-white;
    font-family: $f;
    cursor: pointer;
    transition: all $t-fast;
    font-weight: bold;
    font-size: 1rem;
    box-shadow: 0 3px 10px rgba($c-green, .3);
    margin-top: $s-sm;

    &:hover {
      background: linear-gradient(135deg, #33b5a5, $c-green);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba($c-green, .5);
    }
  }

  .step-navigation {
    display: flex;
    flex-direction: row;
    gap: $s-md;
    width: 100%;

    @media (max-width: 600px) {
      flex-direction: column-reverse;
      
      button {
        width: 100%;
      }
    }

    button {
      flex: 1;
      padding: $s-sm $s-md;
      border-radius: $r-round;
      font-family: $f;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all $t-fast;
      @include fx-c;
      gap: $s-sm;
      border: none;
    }

    .btn-nav-prev {
      background: linear-gradient(135deg, $c-orange, #e89b54);
      color: $c-white;
      box-shadow: 0 3px 10px rgba($c-orange, .3);

      &:hover {
        background: linear-gradient(135deg, #f7b371, $c-orange);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba($c-orange, .5);
      }
    }

    .btn-nav-next,
    .btn-nav-save {
      background: $g-bright;
      color: $c-white;
      box-shadow: 0 4px 15px rgba($c-green, .4);

      &:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba($c-green, .6);
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        box-shadow: none;
      }
    }
  }
}

.btn-create-custom {
  width: 100%;
  padding: $s-md $s-lg;
  border-radius: $r-3;
  background: rgba($c-orange, .2);
  border: 2px solid rgba($c-orange, .5);
  color: $c-orange;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all $t-fast;
  @include fx-c;
  gap: $s-sm;
  margin-top: $s-md;
  
  &:hover {
    background: rgba($c-orange, .3);
    border-color: $c-orange;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba($c-orange, .3);
  }
  
  .btn-icon {
    font-size: 1.3rem;
  }
}

.btn-create-custom-outside {
  background: linear-gradient(135deg, $c-green, $c-yellow);
  color: $c-white;
  border: none;
  padding: $s-sm $s-md;
  border-radius: $r-round;
  font-family: $f;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all $t-norm;
  box-shadow: 0 4px 15px rgba($c-green, .4);
  @include fx-c;
  gap: $s-sm;
  width: 100%;
  margin-top: $s-md;
  
  .btn-icon {
    font-size: 1.1rem;
  }
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba($c-green, .6);
    background: linear-gradient(135deg, #33b5a5, $c-green);
  }
  
  &:active {
    transform: translateY(0);
  }
}

.host-custom-categories-list {
  width: 100%;
  margin: 0 0 $s-md 0;
  
  .custom-categories-title {
    @include txt(1.2rem, bold, $c-white);
    margin: $s-lg 0 $s-md 0;
    text-align: left;
    font-style: normal !important;
    color: $c-white !important;
  }
}

.custom-categories-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: $s-md;
}

.custom-category-card {
  background: rgba($c-blue, .8);
  border-radius: $r-3;
  padding: $s-md;
  cursor: pointer;
  transition: all $t-norm;
  box-shadow: 0 4px 15px rgba($c-black, .3);
  display: flex;
  justify-content: space-between;
  align-items: center;
  
  &.incomplete {
    background: rgba($c-blue, .8);
    
    .custom-category-name {
      color: $c-white;
      font-style: normal;
    }
  }
  
  &.complete {
    background: rgba($c-blue, .8);
  }
  
  &:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba($c-yellow, .4);
    
    &.incomplete {
      box-shadow: 0 6px 20px rgba($c-orange, .4);
    }
  }
  
  .custom-category-content {
    flex: 1;
    display: flex;
    align-items: center;
    gap: $s-sm;
  }
  
  .custom-category-name {
    @include txt(1.1rem, bold, $c-white);
    margin: 0;
  }
  
  .custom-category-difficulty {
    display: flex;
    gap: .25rem;
    color: $c-yellow;
    font-size: 1rem;
  }
  
  .custom-category-edit {
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: $s-md;
    color: $c-white;
    transition: all $t-fast;
    
    &:hover {
      transform: scale(1.2);
    }
  }
}

.custom-category-waiting {
  width: 100%;
  max-width: 800px;
  background: rgba($c-blue, .95);
  border-radius: $r-4;
  padding: $s-xl;
  box-shadow: $s-3;
  
  .waiting-content {
    @include fx-col;
    align-items: center;
    gap: $s-lg;
    text-align: center;
  }

  .waiting-content-horizontal {
    display: flex;
    align-items: center;
    gap: $s-lg;
  }

  .waiting-text-content {
    display: flex;
    flex-direction: column;
    gap: $s-xs;
    flex: 1;
  }
  
  .waiting-icon {
    color: $c-yellow;
    
    &.rotating {
      animation: rotate 2s linear infinite;
    }
  }
  
  .waiting-title {
    @include txt($fs-3, bold, $c-yellow);
    margin: 0;
  }
  
  .waiting-subtitle {
    @include txt($fs-2, normal, rgba($c-white, .8));
    margin: 0;
  }
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// === WIDOK KATEGORII BEZ DRUŻYN ===
.categories-view {
  .categories-content {
    width: 100%;
    max-width: 800px;
    
    .game-header {
      background: none;
      padding: $s-md 0;
    }
  }
}

// === TWORZENIE KATEGORII PRZED GRĄ ===
.category-actions-section {
  display: flex;
  flex-direction: column;
  gap: $s-sm;
  margin: 0 (-$s-lg) $s-md (-$s-lg);
  padding: 0 $s-lg;
  width: calc(100% + ($s-lg * 2));
}

.btn-back-to-waiting {
  background: linear-gradient(135deg, $c-orange, $c-red);
  color: $c-white;
  border: none;
  padding: $s-sm $s-md;
  border-radius: $r-round;
  font-family: $f;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all $t-norm;
  box-shadow: 0 4px 15px rgba($c-orange, .4);
  @include fx-c;
  gap: $s-sm;
  width: 100%;
  
  .btn-icon {
    font-size: 1.1rem;
  }
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba($c-orange, .6);
    background: linear-gradient(135deg, color.adjust($c-orange, $lightness: 5%), $c-orange);
  }
  
  &:active {
    transform: translateY(0);
  }
}

.no-categories-message {
  text-align: center;
  padding: $s-lg;
  color: rgba($c-white, .6);
  font-style: italic;
  
  p {
    margin: $s-sm 0;
  }
}

.categories-info-section {
  padding: $s-lg;
  color: $c-white;
  
  h3 {
    @include txt($fs-4, bold, $c-yellow);
    margin-bottom: $s-md;
    text-align: center;
  }
  
  > p {
    text-align: center;
    margin-bottom: $s-lg;
    color: rgba($c-white, .8);
    line-height: 1.6;
  }
}

.info-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: $s-md;
  margin-top: $s-lg;
}

.info-card {
  background: rgba($c-blue, .2);
  border: 2px solid rgba($c-blue, .3);
  border-radius: $r-3;
  padding: $s-lg;
  
  h4 {
    @include txt($fs-3, bold, $c-yellow);
    margin-bottom: $s-md;
  }
  
  ul {
    list-style: none;
    padding: 0;
    margin: 0;
    
    li {
      padding: $s-sm 0;
      color: rgba($c-white, .9);
      
      &:before {
        content: "✓ ";
        color: $c-green;
        font-weight: bold;
        margin-right: $s-sm;
      }
    }
  }
}

.category-form {
  display: flex;
  flex-direction: column;
  gap: $s-lg;
  max-height: calc(100vh - 200px);
  overflow-y: auto;
  padding-right: $s-sm;
  
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: rgba($c-black, .2);
    border-radius: $r-round;
  }
  
  &::-webkit-scrollbar-thumb {
    background: rgba($c-yellow, .4);
    border-radius: $r-round;
    
    &:hover {
      background: rgba($c-yellow, .6);
    }
  }
  
  .form-group {
    label {
      display: block;
      @include txt($fs-2, bold, $c-yellow);
      margin-bottom: $s-sm;
    }
    
    input[type="text"] {
      width: 100%;
      padding: $s-sm $s-md;
      background: rgba($c-black, .3);
      border: 2px solid rgba($c-yellow, .3);
      border-radius: $r-3;
      color: $c-white;
      font-family: $f;
      font-size: $fs-2;
      transition: all $t-fast;
      
      &:focus {
        outline: none;
        border-color: $c-yellow;
        background: rgba($c-black, .4);
      }
      
      &::placeholder {
        color: rgba($c-white, .4);
      }
    }
  }
  
  .difficulty-selector {
    display: flex;
    gap: $s-sm;
    
    .difficulty-btn {
      flex: 1;
      padding: $s-sm $s-md;
      background: rgba($c-black, .3);
      border: 2px solid rgba($c-white, .2);
      border-radius: $r-3;
      color: $c-white;
      font-family: $f;
      font-size: $fs-2;
      cursor: pointer;
      transition: all $t-fast;
      
      &:hover {
        border-color: rgba($c-yellow, .5);
        background: rgba($c-black, .4);
      }
      
      &.active {
        background: rgba($c-yellow, .3);
        border-color: $c-yellow;
        color: $c-yellow;
        font-weight: bold;
      }
    }
  }
  
  .question-block {
    background: rgba($c-blue, .1);
    border: 2px solid rgba($c-blue, .3);
    border-radius: $r-3;
    padding: $s-lg;
    
    h4 {
      @include txt($fs-3, bold, $c-blue);
      margin-bottom: $s-md;
    }
    
    > input[type="text"] {
      width: 100%;
      padding: $s-sm $s-md;
      background: rgba($c-black, .3);
      border: 2px solid rgba($c-blue, .3);
      border-radius: $r-3;
      color: $c-white;
      font-family: $f;
      font-size: $fs-2;
      margin-bottom: $s-md;
      transition: all $t-fast;
      
      &:focus {
        outline: none;
        border-color: $c-blue;
        background: rgba($c-black, .4);
      }
      
      &::placeholder {
        color: rgba($c-white, .4);
      }
    }
  }
  
  .answers-list {
    display: flex;
    flex-direction: column;
    gap: $s-sm;
  }
  
  .answer-input-row {
    display: flex;
    align-items: center;
    gap: $s-sm;
    
    .answer-number {
      @include txt($fs-2, bold, $c-yellow);
      min-width: 30px;
    }
    
    input[type="text"] {
      flex: 1;
      padding: $s-sm $s-md;
      background: rgba($c-black, .3);
      border: 2px solid rgba($c-green, .3);
      border-radius: $r-3;
      color: $c-white;
      font-family: $f;
      font-size: $fs-2;
      transition: all $t-fast;
      
      &:focus {
        outline: none;
        border-color: $c-green;
        background: rgba($c-black, .4);
      }
      
      &::placeholder {
        color: rgba($c-white, .4);
      }
    }
  }
  
  .form-actions {
    display: flex;
    gap: $s-md;
    margin-top: $s-md;
    
    .btn-save {
      flex: 1;
      padding: $s-md $s-lg;
      background: $g-bright;
      color: $c-white;
      border: none;
      border-radius: $r-3;
      font-family: $f;
      font-size: $fs-3;
      font-weight: bold;
      cursor: pointer;
      transition: all $t-norm;
      
      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba($c-green, .4);
      }
    }
    
    .btn-cancel {
      flex: 1;
      padding: $s-md $s-lg;
      background: rgba($c-red, .2);
      color: $c-white;
      border: 2px solid $c-red;
      border-radius: $r-3;
      font-family: $f;
      font-size: $fs-3;
      font-weight: bold;
      cursor: pointer;
      transition: all $t-norm;
      
      &:hover {
        background: rgba($c-red, .3);
        transform: translateY(-2px);
      }
    }
  }
}

.category-preview {
  background: rgba($c-blue, .1);
  border: 2px solid rgba($c-blue, .3);
  border-radius: $r-3;
  padding: $s-xl;
  text-align: center;
  
  h3 {
    @include txt($fs-3, bold, $c-yellow);
    margin-bottom: $s-lg;
  }
  
  .preview-name {
    @include txt($fs-4, bold, $c-white);
    margin: $s-md 0;
  }
  
  .preview-difficulty {
    @include txt($fs-2, normal, $c-orange);
    margin: $s-sm 0;
  }
  
  .preview-questions {
    @include txt($fs-2, normal, rgba($c-white, .7));
    margin-top: $s-lg;
  }
}
